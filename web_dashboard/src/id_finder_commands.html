{% extends "base.html" %}

{% block title %}Befehls√ºbersicht ‚Äì ID-Finder Bot{% endblock %}

{% block content %}
<style>
  /* --- Command UI --- */
  .cmd-card .card-header { display:flex; align-items:center; justify-content:space-between; }
  .cmd-line { display:flex; align-items:center; justify-content:space-between; gap:12px; }
  .cmd-name { font-weight: 700; }
  .cmd-hint { color: #9aa0a6; font-weight: 400; }

  /* Info Button (Icon) */
  .info-btn {
    display:inline-flex;
    align-items:center;
    justify-content:center;
    width: 34px;
    height: 34px;
    border-radius: 10px;
    border: 1px solid rgba(255,255,255,0.12);
    background: rgba(255,255,255,0.06);
    color: #e9ecef;
    cursor: pointer;
    flex: 0 0 auto;
  }
  .info-btn:hover { background: rgba(255,255,255,0.10); }
  .info-btn:active { transform: translateY(1px); }
  .info-btn .fallback-i {
    width: 18px; height: 18px;
    border-radius: 999px;
    border: 2px solid currentColor;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    font-size: 12px;
    font-weight: 800;
    line-height: 1;
  }

  /* Dark "Steckbrief" panel */
  .info-panel {
    margin-top: 10px;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.12);
    background: #212529;           /* dunkel */
    color: #f8f9fa;
    padding: 12px 14px;
    display: none;
  }
  .info-panel .label { color: #adb5bd; font-weight: 700; margin-right: 6px; }
  .info-panel code {
    color: #ffd54f;
    background: rgba(255,255,255,0.06);
    padding: 2px 6px;
    border-radius: 6px;
  }
  .info-panel .rowline { margin-top: 6px; }
  .info-panel .titleline {
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    margin-bottom: 8px;
  }
  .info-panel .titleline .title {
    font-weight: 800;
    letter-spacing: 0.2px;
  }
  .info-panel .close-mini {
    border: 1px solid rgba(255,255,255,0.12);
    background: rgba(255,255,255,0.06);
    color: #f8f9fa;
    border-radius: 10px;
    padding: 4px 10px;
    cursor: pointer;
    font-size: 12px;
  }
  .info-panel .close-mini:hover { background: rgba(255,255,255,0.10); }

  /* Search card spacing */
  .search-row { margin-bottom: 16px; }

  /* Make list items look good on dark UIs too */
  .list-group-item.cmd-item { background: rgba(255,255,255,0.02); }
</style>

<div class="container mt-4">
  <a href="{{ url_for('id_finder_dashboard') }}" class="btn btn-secondary mb-3">‚Üê Zur√ºck zum ID-Finder Dashboard</a>

  <h1 class="display-5 mb-2 text-center">üß© ID-Finder Bot ‚Äì Befehls√ºbersicht</h1>
  <p class="text-center text-muted mb-4">
    Klick auf das <strong>Info-Icon</strong> neben einem Befehl ‚Üí du bekommst direkt den Steckbrief (dunkel, passend zur UI).
  </p>

  <!-- Mini-Suche -->
  <div class="row g-2 align-items-end search-row">
    <div class="col-md-9">
      <label for="cmdSearch" class="form-label">Suche nach Command</label>
      <input type="text" class="form-control" id="cmdSearch" placeholder="z.B. /ban, /warn, /lock ...">
    </div>
    <div class="col-md-3 d-grid">
      <button class="btn btn-outline-secondary" type="button" id="clearCmdSearch">Suche l√∂schen</button>
    </div>
  </div>

  <div class="row row-cols-1 row-cols-md-2 g-4" id="cmdGrid">

    <!-- Grundlagen & IDs -->
    <div class="col cmd-card">
      <div class="card h-100">
        <div class="card-header fw-bold">üÜî Grundlagen & IDs</div>
        <ul class="list-group list-group-flush">

          <li class="list-group-item cmd-item">
            <div class="cmd-line">
              <div>
                <div class="cmd-name">/chatid</div>
              </div>

              <button type="button" class="info-btn" data-target="info-chatid" aria-expanded="false" aria-controls="info-chatid" title="Info">
                <span class="fallback-i">i</span>
              </button>
            </div>

            <div class="info-panel" id="info-chatid" role="region" aria-label="Info /chatid">
              <div class="titleline">
                <div class="title">/chatid</div>
                <button type="button" class="close-mini" data-close="info-chatid">Schlie√üen</button>
              </div>
              <div class="rowline"><span class="label">Kann:</span> Zeigt die Chat-ID der Gruppe.</div>
              <div class="rowline"><span class="label">So nutzt du‚Äôs:</span> <code>/chatid</code></div>
              <div class="rowline"><span class="label">Beispiel:</span> <code>/chatid</code></div>
            </div>
          </li>

          <li class="list-group-item cmd-item">
            <div class="cmd-line">
              <div>
                <div class="cmd-name">/userid</div>
                <div class="cmd-hint">Optional als Reply</div>
              </div>

              <button type="button" class="info-btn" data-target="info-userid" aria-expanded="false" aria-controls="info-userid" title="Info">
                <span class="fallback-i">i</span>
              </button>
            </div>

            <div class="info-panel" id="info-userid" role="region" aria-label="Info /userid">
              <div class="titleline">
                <div class="title">/userid</div>
                <button type="button" class="close-mini" data-close="info-userid">Schlie√üen</button>
              </div>
              <div class="rowline"><span class="label">Kann:</span> Zeigt deine User-ID. Als Reply zus√§tzlich die ID vom Ziel-User.</div>
              <div class="rowline"><span class="label">So nutzt du‚Äôs:</span> <code>/userid</code> oder als Reply</div>
              <div class="rowline"><span class="label">Beispiel:</span> <code>/userid</code> ‚Ä¢ <code>(Reply) /userid</code></div>
            </div>
          </li>

          <li class="list-group-item cmd-item">
            <div class="cmd-line">
              <div>
                <div class="cmd-name">/topicid</div>
              </div>

              <button type="button" class="info-btn" data-target="info-topicid" aria-expanded="false" aria-controls="info-topicid" title="Info">
                <span class="fallback-i">i</span>
              </button>
            </div>

            <div class="info-panel" id="info-topicid" role="region" aria-label="Info /topicid">
              <div class="titleline">
                <div class="title">/topicid</div>
                <button type="button" class="close-mini" data-close="info-topicid">Schlie√üen</button>
              </div>
              <div class="rowline"><span class="label">Kann:</span> Zeigt die Topic-/Thread-ID (nur in Forum-Topics).</div>
              <div class="rowline"><span class="label">So nutzt du‚Äôs:</span> <code>/topicid</code></div>
              <div class="rowline"><span class="label">Beispiel:</span> <code>/topicid</code></div>
            </div>
          </li>

          <li class="list-group-item cmd-item">
            <div class="cmd-line">
              <div>
                <div class="cmd-name">/id</div>
              </div>

              <button type="button" class="info-btn" data-target="info-id" aria-expanded="false" aria-controls="info-id" title="Info">
                <span class="fallback-i">i</span>
              </button>
            </div>

            <div class="info-panel" id="info-id" role="region" aria-label="Info /id">
              <div class="titleline">
                <div class="title">/id</div>
                <button type="button" class="close-mini" data-close="info-id">Schlie√üen</button>
              </div>
              <div class="rowline"><span class="label">Kann:</span> Gibt User-ID + Chat-ID + (optional) Topic-ID in einer Ausgabe aus.</div>
              <div class="rowline"><span class="label">So nutzt du‚Äôs:</span> <code>/id</code></div>
              <div class="rowline"><span class="label">Beispiel:</span> <code>/id</code></div>
            </div>
          </li>

        </ul>
      </div>
    </div>

    <!-- Verwarnungen -->
    <div class="col cmd-card">
      <div class="card h-100">
        <div class="card-header fw-bold">‚ö†Ô∏è Verwarnungen</div>
        <ul class="list-group list-group-flush">

          <li class="list-group-item cmd-item">
            <div class="cmd-line">
              <div>
                <div class="cmd-name">/warn <span class="cmd-hint">USER_ID Grund</span></div>
              </div>

              <button type="button" class="info-btn" data-target="info-warn" aria-expanded="false" aria-controls="info-warn" title="Info">
                <span class="fallback-i">i</span>
              </button>
            </div>

            <div class="info-panel" id="info-warn" role="region" aria-label="Info /warn">
              <div class="titleline">
                <div class="title">/warn</div>
                <button type="button" class="close-mini" data-close="info-warn">Schlie√üen</button>
              </div>
              <div class="rowline"><span class="label">Kann:</span> Verwarnt den User (Warnz√§hler +1). Optional mit Grund.</div>
              <div class="rowline"><span class="label">So nutzt du‚Äôs:</span> <code>/warn USER_ID Grund</code></div>
              <div class="rowline"><span class="label">Beispiel:</span> <code>/warn 123456 Spammen</code></div>
            </div>
          </li>

          <li class="list-group-item cmd-item">
            <div class="cmd-line">
              <div>
                <div class="cmd-name">/warnings <span class="cmd-hint">USER_ID</span></div>
              </div>

              <button type="button" class="info-btn" data-target="info-warnings" aria-expanded="false" aria-controls="info-warnings" title="Info">
                <span class="fallback-i">i</span>
              </button>
            </div>

            <div class="info-panel" id="info-warnings" role="region" aria-label="Info /warnings">
              <div class="titleline">
                <div class="title">/warnings</div>
                <button type="button" class="close-mini" data-close="info-warnings">Schlie√üen</button>
              </div>
              <div class="rowline"><span class="label">Kann:</span> Zeigt die aktuellen Verwarnungen des Users.</div>
              <div class="rowline"><span class="label">So nutzt du‚Äôs:</span> <code>/warnings USER_ID</code></div>
              <div class="rowline"><span class="label">Beispiel:</span> <code>/warnings 123456</code></div>
            </div>
          </li>

          <li class="list-group-item cmd-item">
            <div class="cmd-line">
              <div>
                <div class="cmd-name">/unwarn <span class="cmd-hint">USER_ID</span></div>
              </div>

              <button type="button" class="info-btn" data-target="info-unwarn" aria-expanded="false" aria-controls="info-unwarn" title="Info">
                <span class="fallback-i">i</span>
              </button>
            </div>

            <div class="info-panel" id="info-unwarn" role="region" aria-label="Info /unwarn">
              <div class="titleline">
                <div class="title">/unwarn</div>
                <button type="button" class="close-mini" data-close="info-unwarn">Schlie√üen</button>
              </div>
              <div class="rowline"><span class="label">Kann:</span> Entfernt eine Verwarnung (Warnz√§hler -1).</div>
              <div class="rowline"><span class="label">So nutzt du‚Äôs:</span> <code>/unwarn USER_ID</code></div>
              <div class="rowline"><span class="label">Beispiel:</span> <code>/unwarn 123456</code></div>
            </div>
          </li>

          <li class="list-group-item cmd-item">
            <div class="cmd-line">
              <div>
                <div class="cmd-name">/clearwarnings <span class="cmd-hint">USER_ID</span></div>
              </div>

              <button type="button" class="info-btn" data-target="info-clearwarnings" aria-expanded="false" aria-controls="info-clearwarnings" title="Info">
                <span class="fallback-i">i</span>
              </button>
            </div>

            <div class="info-panel" id="info-clearwarnings" role="region" aria-label="Info /clearwarnings">
              <div class="titleline">
                <div class="title">/clearwarnings</div>
                <button type="button" class="close-mini" data-close="info-clearwarnings">Schlie√üen</button>
              </div>
              <div class="rowline"><span class="label">Kann:</span> Setzt alle Verwarnungen des Users zur√ºck (Warnz√§hler = 0).</div>
              <div class="rowline"><span class="label">So nutzt du‚Äôs:</span> <code>/clearwarnings USER_ID</code></div>
              <div class="rowline"><span class="label">Beispiel:</span> <code>/clearwarnings 123456</code></div>
            </div>
          </li>

        </ul>
      </div>
    </div>

    <!-- Mute -->
    <div class="col cmd-card">
      <div class="card h-100">
        <div class="card-header fw-bold">üîá Stummschalten</div>
        <ul class="list-group list-group-flush">

          <li class="list-group-item cmd-item">
            <div class="cmd-line">
              <div>
                <div class="cmd-name">/mute <span class="cmd-hint">USER_ID 10m Grund</span></div>
              </div>

              <button type="button" class="info-btn" data-target="info-mute" aria-expanded="false" aria-controls="info-mute" title="Info">
                <span class="fallback-i">i</span>
              </button>
            </div>

            <div class="info-panel" id="info-mute" role="region" aria-label="Info /mute">
              <div class="titleline">
                <div class="title">/mute</div>
                <button type="button" class="close-mini" data-close="info-mute">Schlie√üen</button>
              </div>
              <div class="rowline"><span class="label">Kann:</span> Stummschaltet den User f√ºr eine Dauer. Optional mit Grund.</div>
              <div class="rowline"><span class="label">So nutzt du‚Äôs:</span> <code>/mute USER_ID DAUER Grund</code></div>
              <div class="rowline"><span class="label">Beispiel:</span> <code>/mute 123456 10m Spam</code></div>
            </div>
          </li>

          <li class="list-group-item cmd-item">
            <div class="cmd-line">
              <div>
                <div class="cmd-name">/unmute <span class="cmd-hint">USER_ID</span></div>
              </div>

              <button type="button" class="info-btn" data-target="info-unmute" aria-expanded="false" aria-controls="info-unmute" title="Info">
                <span class="fallback-i">i</span>
              </button>
            </div>

            <div class="info-panel" id="info-unmute" role="region" aria-label="Info /unmute">
              <div class="titleline">
                <div class="title">/unmute</div>
                <button type="button" class="close-mini" data-close="info-unmute">Schlie√üen</button>
              </div>
              <div class="rowline"><span class="label">Kann:</span> Hebt die Stummschaltung auf (User darf wieder schreiben).</div>
              <div class="rowline"><span class="label">So nutzt du‚Äôs:</span> <code>/unmute USER_ID</code></div>
              <div class="rowline"><span class="label">Beispiel:</span> <code>/unmute 123456</code></div>
            </div>
          </li>

        </ul>
      </div>
    </div>

    <!-- Kick/Ban -->
    <div class="col cmd-card">
      <div class="card h-100">
        <div class="card-header fw-bold">üö´ Kick & Ban</div>
        <ul class="list-group list-group-flush">

          <li class="list-group-item cmd-item">
            <div class="cmd-line">
              <div>
                <div class="cmd-name">/kick <span class="cmd-hint">USER_ID Grund</span></div>
              </div>

              <button type="button" class="info-btn" data-target="info-kick" aria-expanded="false" aria-controls="info-kick" title="Info">
                <span class="fallback-i">i</span>
              </button>
            </div>

            <div class="info-panel" id="info-kick" role="region" aria-label="Info /kick">
              <div class="titleline">
                <div class="title">/kick</div>
                <button type="button" class="close-mini" data-close="info-kick">Schlie√üen</button>
              </div>
              <div class="rowline"><span class="label">Kann:</span> Entfernt den User aus der Gruppe (kann meist wieder beitreten). Optional mit Grund.</div>
              <div class="rowline"><span class="label">So nutzt du‚Äôs:</span> <code>/kick USER_ID Grund</code></div>
              <div class="rowline"><span class="label">Beispiel:</span> <code>/kick 123456 St√∂ren</code></div>
            </div>
          </li>

          <li class="list-group-item cmd-item">
            <div class="cmd-line">
              <div>
                <div class="cmd-name">/ban <span class="cmd-hint">USER_ID Grund</span></div>
              </div>

              <button type="button" class="info-btn" data-target="info-ban" aria-expanded="false" aria-controls="info-ban" title="Info">
                <span class="fallback-i">i</span>
              </button>
            </div>

            <div class="info-panel" id="info-ban" role="region" aria-label="Info /ban">
              <div class="titleline">
                <div class="title">/ban</div>
                <button type="button" class="close-mini" data-close="info-ban">Schlie√üen</button>
              </div>
              <div class="rowline"><span class="label">Kann:</span> Bannt den User aus der Gruppe (Beitritt gesperrt). Optional mit Grund.</div>
              <div class="rowline"><span class="label">So nutzt du‚Äôs:</span> <code>/ban USER_ID Grund</code></div>
              <div class="rowline"><span class="label">Beispiel:</span> <code>/ban 123456 Hardcore Spam</code></div>
            </div>
          </li>

          <li class="list-group-item cmd-item">
            <div class="cmd-line">
              <div>
                <div class="cmd-name">/unban <span class="cmd-hint">USER_ID</span></div>
              </div>

              <button type="button" class="info-btn" data-target="info-unban" aria-expanded="false" aria-controls="info-unban" title="Info">
                <span class="fallback-i">i</span>
              </button>
            </div>

            <div class="info-panel" id="info-unban" role="region" aria-label="Info /unban">
              <div class="titleline">
                <div class="title">/unban</div>
                <button type="button" class="close-mini" data-close="info-unban">Schlie√üen</button>
              </div>
              <div class="rowline"><span class="label">Kann:</span> Hebt den Bann auf (User darf wieder beitreten).</div>
              <div class="rowline"><span class="label">So nutzt du‚Äôs:</span> <code>/unban USER_ID</code></div>
              <div class="rowline"><span class="label">Beispiel:</span> <code>/unban 123456</code></div>
            </div>
          </li>

        </ul>
      </div>
    </div>

    <!-- Nachrichten-Tools -->
    <div class="col cmd-card">
      <div class="card h-100">
        <div class="card-header fw-bold">üßπ Nachrichten-Tools</div>
        <ul class="list-group list-group-flush">

          <li class="list-group-item cmd-item">
            <div class="cmd-line">
              <div>
                <div class="cmd-name">/del <span class="cmd-hint">(Reply)</span></div>
              </div>

              <button type="button" class="info-btn" data-target="info-del" aria-expanded="false" aria-controls="info-del" title="Info">
                <span class="fallback-i">i</span>
              </button>
            </div>

            <div class="info-panel" id="info-del" role="region" aria-label="Info /del">
              <div class="titleline">
                <div class="title">/del</div>
                <button type="button" class="close-mini" data-close="info-del">Schlie√üen</button>
              </div>
              <div class="rowline"><span class="label">Kann:</span> L√∂scht die Nachricht, auf die du geantwortet hast.</div>
              <div class="rowline"><span class="label">So nutzt du‚Äôs:</span> Als Reply <code>/del</code></div>
              <div class="rowline"><span class="label">Beispiel:</span> <code>(Reply) /del</code></div>
            </div>
          </li>

          <li class="list-group-item cmd-item">
            <div class="cmd-line">
              <div>
                <div class="cmd-name">/purge <span class="cmd-hint">(Reply)</span></div>
              </div>

              <button type="button" class="info-btn" data-target="info-purge" aria-expanded="false" aria-controls="info-purge" title="Info">
                <span class="fallback-i">i</span>
              </button>
            </div>

            <div class="info-panel" id="info-purge" role="region" aria-label="Info /purge">
              <div class="titleline">
                <div class="title">/purge</div>
                <button type="button" class="close-mini" data-close="info-purge">Schlie√üen</button>
              </div>
              <div class="rowline"><span class="label">Kann:</span> L√∂scht mehrere Nachrichten ab einer Start-Nachricht (je nach Implementierung).</div>
              <div class="rowline"><span class="label">So nutzt du‚Äôs:</span> Auf Start-Nachricht replyen ‚Üí <code>/purge</code></div>
              <div class="rowline"><span class="label">Beispiel:</span> <code>(Reply auf Start) /purge</code></div>
            </div>
          </li>

          <li class="list-group-item cmd-item">
            <div class="cmd-line">
              <div>
                <div class="cmd-name">/pin <span class="cmd-hint">(Reply)</span></div>
              </div>

              <button type="button" class="info-btn" data-target="info-pin" aria-expanded="false" aria-controls="info-pin" title="Info">
                <span class="fallback-i">i</span>
              </button>
            </div>

            <div class="info-panel" id="info-pin" role="region" aria-label="Info /pin">
              <div class="titleline">
                <div class="title">/pin</div>
                <button type="button" class="close-mini" data-close="info-pin">Schlie√üen</button>
              </div>
              <div class="rowline"><span class="label">Kann:</span> Pinnt die Nachricht, auf die du geantwortet hast.</div>
              <div class="rowline"><span class="label">So nutzt du‚Äôs:</span> Als Reply <code>/pin</code></div>
              <div class="rowline"><span class="label">Beispiel:</span> <code>(Reply) /pin</code></div>
            </div>
          </li>

          <li class="list-group-item cmd-item">
            <div class="cmd-line">
              <div>
                <div class="cmd-name">/unpin</div>
              </div>

              <button type="button" class="info-btn" data-target="info-unpin" aria-expanded="false" aria-controls="info-unpin" title="Info">
                <span class="fallback-i">i</span>
              </button>
            </div>

            <div class="info-panel" id="info-unpin" role="region" aria-label="Info /unpin">
              <div class="titleline">
                <div class="title">/unpin</div>
                <button type="button" class="close-mini" data-close="info-unpin">Schlie√üen</button>
              </div>
              <div class="rowline"><span class="label">Kann:</span> Entfernt den aktuellen Pin in der Gruppe.</div>
              <div class="rowline"><span class="label">So nutzt du‚Äôs:</span> <code>/unpin</code></div>
              <div class="rowline"><span class="label">Beispiel:</span> <code>/unpin</code></div>
            </div>
          </li>

        </ul>
      </div>
    </div>

    <!-- Locks / Konfiguration -->
    <div class="col cmd-card">
      <div class="card h-100">
        <div class="card-header fw-bold">üîí Locks & Konfiguration</div>
        <ul class="list-group list-group-flush">

          <li class="list-group-item cmd-item">
            <div class="cmd-line">
              <div>
                <div class="cmd-name">/lock <span class="cmd-hint">links|media|stickers</span></div>
              </div>

              <button type="button" class="info-btn" data-target="info-lock" aria-expanded="false" aria-controls="info-lock" title="Info">
                <span class="fallback-i">i</span>
              </button>
            </div>

            <div class="info-panel" id="info-lock" role="region" aria-label="Info /lock">
              <div class="titleline">
                <div class="title">/lock</div>
                <button type="button" class="close-mini" data-close="info-lock">Schlie√üen</button>
              </div>
              <div class="rowline"><span class="label">Kann:</span> Sperrt ein Feature (z.B. Links / Medien / Sticker) ‚Äì je nach Bot-Logik.</div>
              <div class="rowline"><span class="label">So nutzt du‚Äôs:</span> <code>/lock links</code></div>
              <div class="rowline"><span class="label">Beispiel:</span> <code>/lock media</code></div>
            </div>
          </li>

          <li class="list-group-item cmd-item">
            <div class="cmd-line">
              <div>
                <div class="cmd-name">/unlock <span class="cmd-hint">links|media|stickers</span></div>
              </div>

              <button type="button" class="info-btn" data-target="info-unlock" aria-expanded="false" aria-controls="info-unlock" title="Info">
                <span class="fallback-i">i</span>
              </button>
            </div>

            <div class="info-panel" id="info-unlock" role="region" aria-label="Info /unlock">
              <div class="titleline">
                <div class="title">/unlock</div>
                <button type="button" class="close-mini" data-close="info-unlock">Schlie√üen</button>
              </div>
              <div class="rowline"><span class="label">Kann:</span> Hebt die Sperre wieder auf.</div>
              <div class="rowline"><span class="label">So nutzt du‚Äôs:</span> <code>/unlock links</code></div>
              <div class="rowline"><span class="label">Beispiel:</span> <code>/unlock stickers</code></div>
            </div>
          </li>

          <li class="list-group-item cmd-item">
            <div class="cmd-line">
              <div>
                <div class="cmd-name">/locks</div>
              </div>

              <button type="button" class="info-btn" data-target="info-locks" aria-expanded="false" aria-controls="info-locks" title="Info">
                <span class="fallback-i">i</span>
              </button>
            </div>

            <div class="info-panel" id="info-locks" role="region" aria-label="Info /locks">
              <div class="titleline">
                <div class="title">/locks</div>
                <button type="button" class="close-mini" data-close="info-locks">Schlie√üen</button>
              </div>
              <div class="rowline"><span class="label">Kann:</span> Zeigt an, welche Locks aktiv sind.</div>
              <div class="rowline"><span class="label">So nutzt du‚Äôs:</span> <code>/locks</code></div>
              <div class="rowline"><span class="label">Beispiel:</span> <code>/locks</code></div>
            </div>
          </li>

          <li class="list-group-item cmd-item">
            <div class="cmd-line">
              <div>
                <div class="cmd-name">/setadmingroup <span class="cmd-hint">CHAT_ID</span></div>
              </div>

              <button type="button" class="info-btn" data-target="info-setadmingroup" aria-expanded="false" aria-controls="info-setadmingroup" title="Info">
                <span class="fallback-i">i</span>
              </button>
            </div>

            <div class="info-panel" id="info-setadmingroup" role="region" aria-label="Info /setadmingroup">
              <div class="titleline">
                <div class="title">/setadmingroup</div>
                <button type="button" class="close-mini" data-close="info-setadmingroup">Schlie√üen</button>
              </div>
              <div class="rowline"><span class="label">Kann:</span> Setzt/√§ndert die Admin-Gruppe f√ºr Bot-Logs/Administration (sofern im Bot aktiv genutzt).</div>
              <div class="rowline"><span class="label">So nutzt du‚Äôs:</span> <code>/setadmingroup -100123456789</code></div>
              <div class="rowline"><span class="label">Beispiel:</span> <code>/setadmingroup -100987654321</code></div>
            </div>
          </li>

        </ul>
      </div>
    </div>

  </div>
</div>

<script>
(function() {
  const input = document.getElementById("cmdSearch");
  const clearBtn = document.getElementById("clearCmdSearch");

  function closeAllPanels(exceptId) {
    document.querySelectorAll(".info-panel").forEach(p => {
      if (exceptId && p.id === exceptId) return;
      p.style.display = "none";
    });
    document.querySelectorAll(".info-btn").forEach(b => {
      if (exceptId && b.getAttribute("data-target") === exceptId) return;
      b.setAttribute("aria-expanded", "false");
    });
  }

  // Toggle panel on info button click
  document.addEventListener("click", (e) => {
    const btn = e.target.closest(".info-btn");
    if (btn) {
      const id = btn.getAttribute("data-target");
      const panel = document.getElementById(id);
      if (!panel) return;

      const isOpen = panel.style.display === "block";
      closeAllPanels(id);

      panel.style.display = isOpen ? "none" : "block";
      btn.setAttribute("aria-expanded", isOpen ? "false" : "true");
      return;
    }

    // Close buttons inside panels
    const closeBtn = e.target.closest("[data-close]");
    if (closeBtn) {
      const id = closeBtn.getAttribute("data-close");
      const panel = document.getElementById(id);
      const opener = document.querySelector(`.info-btn[data-target="${id}"]`);
      if (panel) panel.style.display = "none";
      if (opener) opener.setAttribute("aria-expanded", "false");
      return;
    }

    // Click outside -> close all (optional, f√ºhlt sich sauber an)
    const clickedInsidePanel = e.target.closest(".info-panel");
    if (!clickedInsidePanel) closeAllPanels();
  });

  // Search filters cards
  function filterCommands() {
    const q = (input.value || "").toLowerCase().trim();
    const cards = document.querySelectorAll("#cmdGrid .cmd-card");
    cards.forEach(card => {
      const text = card.innerText.toLowerCase();
      card.style.display = text.includes(q) ? "" : "none";
    });
    closeAllPanels();
  }

  if (input) input.addEventListener("input", filterCommands);
  if (clearBtn) clearBtn.addEventListener("click", () => {
    input.value = "";
    filterCommands();
    input.focus();
  });
})();
</script>
{% endblock %}
